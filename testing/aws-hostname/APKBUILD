# Maintainer: Dan Williams <dan@ma.ssive.co>
pkgname=aws-hostname
pkgver=0.2.0
pkgrel=0
pkgdesc="Manage instance identity on AWS"
url="https://github.com/massiveco/aws-hostname"
arch="all"
license="Apache-2.0"
makedepends="go bash"
source="$pkgname-$pkgver.tar.gz::${url}/archive/${pkgver}.tar.gz"
builddir="$srcdir/src/github.com/massiveco/aws-hostname"

export GOPATH="$srcdir"

prepare() {
	mkdir -p ${builddir%/*}
	mv "$srcdir"/$pkgname-${pkgver} "$builddir"/
	default_prepare
}

build() {
	cd "$builddir"
	go get ./...
	make
}

# check() {
# 	cd "$builddir"
# 	make test
# }

package() {
	install -Dm755 "$builddir"/aws-hostname "$pkgdir"/usr/bin/aws-hostname
}

sha512sums="de0e5155838295a70f13b72b540497a980250b69b6d73592c01e44e15b346aadf80289af266ea1ac636fee4ae71f795ac8921afdea1e7506b2b76e70bd0b08e2  aws-hostname-0.2.0.tar.gz"
